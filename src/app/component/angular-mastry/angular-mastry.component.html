@defer{


<div class="container my-5">
    <h2 class="text-center fw-bold mb-4">Angular Mastery Plan</h2>

    <div class="progress mb-3" style="height: 40px;">
        <div class="progress-bar bg-success" role="progressbar" style="width: 12%;" aria-valuenow="75" aria-valuemin="0"
            aria-valuemax="100">
            12%
        </div>
    </div>
    <app-search-bar (searchItem)="filteredPlan($event)"></app-search-bar>


    <div class="row g-4">
        <div class="col-md-6" *ngFor="let item of filteredMasteryPlan;let i = index">
            <div class="card border-0 shadow-lg rounded-4 h-100"
                [ngClass]="{ 'bg-success text-white': item.completed, 'bg-light': !item.completed }">

                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="badge bg-primary rounded-pill px-3 py-2">
                            {{ item.day }}
                        </span>
                        <span class="text-muted">{{ item.week }}</span>
                    </div>
                    <h5 [ngClass]="{'card-title text-white fw-semibold mb-3':item.completed, 'card-title text-dark fw-semibold mb-3':!item.completed}">{{ item.topic }}</h5>

                    <!-- Button to toggle completion -->


                    <ul class="list-unstyled ps-3">
                        <li *ngFor="let sub of item.subtopics" class="mb-2">
                            <i class="bi bi-check-circle-fill text-success me-2"></i>{{ sub }}
                        </li>
                    </ul>
                    <i class="bi bi-arrow-right-circle-fill mb-5 fs-2 fw-bold" [routerLink]="['/mastry', item.id]"
                        [queryParams]="{data:item | encoder:'encode'}"
                        style="position: absolute; right: 30px;bottom: 10px;"></i>  
                </div>
                <button [ngClass]="item.completed ? 'btn btn-success' : 'btn btn-primary'"  (click)="toggleCompletion(item)"   >
                    {{ item.completed ? 'Completed' : 'Mark As completed' }}
                  </button>
                  
            </div>
        </div>
    </div>
</div>
}

@placeholder(minimum 2000ms){
<div class="text-center my-5 vh-100 d-flex justify-content-center " style="height: 100vh;">
    <div >
     <img src="assets/image/giphy.gif">
    </div>
</div>}